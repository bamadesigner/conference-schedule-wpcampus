!function($){"use strict";$(document).ready(function(){$(".conf-sch-single-container").each(function(){$(this).render_conf_schedule_single()})}),$.fn.print_conf_schedule_single_error=function(errorMsg){var $conf_sch_single=$(this),$contentArea=$conf_sch_single.find(".conf-sch-single-content");void 0!==errorMsg&&""!=errorMsg||(errorMsg=conf_sch.error_msg);var $errorArea=$contentArea.find(".conf-sch-single-error");$errorArea.length?$contentArea.fadeOut(500,function(){$contentArea.hide(),$errorArea.html(errorMsg),$conf_sch_single.addClass("error").removeClass("loading loading--initial"),$contentArea.fadeIn(500)}):($errorArea=$('<div class="conf-sch-single-error">'+errorMsg+"</div>"),$contentArea.fadeOut(500,function(){$contentArea.hide().prepend($errorArea),$conf_sch_single.addClass("error").removeClass("loading loading--initial"),$contentArea.fadeIn(500)}))},$.fn.populate_conf_schedule_single=function(post){var $conf_sch_single=$(this);if(void 0===post||""==post||!post.id)return $conf_sch_single.print_conf_schedule_single_error(),!1;post.event_links=conf_sch_get_item_links(post),null===post.event_links&&(post.event_links={}),post.event_links.schedule=conf_sch.schedule_url;var content_template=$("#conf-sch-single-content-template").html();if(content_template){var process_content=Handlebars.compile(content_template);$conf_sch_single.find(".conf-sch-single-content").html(process_content(post).trim())}var video_template=$("#conf-sch-single-video-template").html();if(video_template){var process_video=Handlebars.compile(video_template);$conf_sch_single.find(".conf-sch-single-video").append(process_video(post).trim())}var ls_template=$("#conf-sch-single-ls-template").html();if(ls_template){var process_ls=Handlebars.compile(ls_template);$conf_sch_single.find(".conf-sch-single-livestream").html(process_ls(post).trim())}var notifications_template=$("#conf-sch-single-notifications-template").html();if(notifications_template){var process_notifications=Handlebars.compile(notifications_template);$conf_sch_single.find(".conf-sch-single-notifications").html(process_notifications(post).trim())}var speakers_template=$("#conf-sch-single-speakers-template").html();if(speakers_template){var process_speakers=Handlebars.compile(speakers_template);$conf_sch_single.find(".conf-sch-single-speakers").html(process_speakers(post).trim())}$conf_sch_single.removeClass("loading loading--initial")},$.fn.render_conf_schedule_single=function(){var $conf_sch_single=$(this),postID=$conf_sch_single.data("post");if(!(void 0!==postID&&postID>0))return $conf_sch_single.print_conf_schedule_single_error(),!1;$conf_sch_single.addClass("loading"),function(postID){return $.ajax({url:conf_sch.wp_api_route+"schedule/"+postID,type:"GET",dataType:"json",async:!0,cache:!0})}(postID).done(function(post){if(void 0===post||""==post||!post.id)return $conf_sch_single.print_conf_schedule_single_error(),!1;if(post.valid_session=!1,$.inArray(post.event_type,["group","session"])<0)return $conf_sch_single.populate_conf_schedule_single(post),!1;if("session"==post.event_type&&(void 0===post.proposal||!post.proposal))return $conf_sch_single.populate_conf_schedule_single(post),!1;if("session"==post.event_type){(function(proposalID,postID){return $.ajax({url:conf_sch.ajaxurl,type:"GET",dataType:"json",async:!0,cache:!0,data:{action:"conf_sch_get_proposal",post_id:postID,proposal_id:proposalID}})})(post.proposal,postID).done(function(proposal){if(void 0===proposal||""==proposal||!proposal.ID)return $conf_sch_single.print_conf_schedule_single_error(),!1;post=function(post,proposal){return post=$.isEmptyObject(proposal)||"confirmed"!=proposal.proposal_status?conf_schedule_reset_schedule_item(post):conf_schedule_update_schedule_item_from_proposal(post,proposal)}(post,proposal),$conf_sch_single.populate_conf_schedule_single(post)})}else if("group"==post.event_type){(function(postID){return $.ajax({url:conf_sch.wp_api_route+"schedule/?conf_sch_event_children="+postID,type:"GET",async:!0,cache:!0})})(postID).done(function(children){if(void 0===children||!children.length)return $conf_sch_single.print_conf_schedule_single_error(),!1;var proposalArgs={post__in:[]};var args,data;$.each(children,function(index,child){child.proposal&&proposalArgs.post__in.push(child.proposal)}),(data={},void 0!==(args=proposalArgs)&&void 0!==args.post__in&&(data.post__in=args.post__in,data.transient=args.post__in),data.action="conf_sch_get_proposals",$.ajax({url:conf_sch.ajaxurl,type:"GET",dataType:"json",async:!0,cache:!0,data:data})).done(function(the_proposals){if(void 0===the_proposals||!the_proposals.length)return $conf_sch_single.print_conf_schedule_single_error(),!1;var proposals={};$.each(the_proposals,function(index,proposal){proposal.ID&&(proposals["proposal"+proposal.ID]=proposal)}),post.event_children=[],$.each(children,function(index,child){if(!child.proposal)return!1;var proposal=null;"proposal"+child.proposal in proposals&&(proposal=proposals["proposal"+child.proposal]),(child=null===proposal||""==proposal||$.isEmptyObject(proposal)||"confirmed"!=proposal.proposal_status?conf_schedule_reset_schedule_item(child):conf_schedule_update_schedule_item_from_proposal(child,proposal)).event_links=conf_sch_get_item_links(child),null===post.event_links&&(post.event_links={}),post.event_children.push(child)}),$conf_sch_single.populate_conf_schedule_single(post)})})}})},Handlebars.registerHelper("notifications",function(){return"workshop"==this.format_slug?new Handlebars.SafeString('<div class="panel light-royal-blue center"><a href="/tickets/workshops/"><strong>All workshops require registration</strong></a> in order to attend. <em>Workshops include a snack break.</em></div>'):$.inArray(this.format_slug,["session","lightning-talk"])>=0?(this.session_livestream_url,null):null}),Handlebars.registerHelper("event_title",function(){var $new_title=this.title.rendered;return void 0!==$new_title&&$new_title?(this.link_to_post&&void 0!==this.link&&this.link&&($new_title='<a href="'+this.link+'">'+$new_title+"</a>"),new Handlebars.SafeString('<h2 class="event-title">'+$new_title+"</h2>")):null}),Handlebars.registerHelper("event_content",function(){var event_content="";return""!=this.content.rendered&&(event_content=this.content.rendered),""!=event_content?new Handlebars.SafeString(event_content):"group"==this.event_type?null:new Handlebars.SafeString("<p><em>There is no information for this session.</em></p>")}),Handlebars.registerHelper("session_video_message",function(){var format=this.format_slug,videoSoon=new Handlebars.SafeString("<p><em>This session's recording will be available soon.</em></p>"),noVideoYet=new Handlebars.SafeString("<p><em>This session does not have a video recording (yet).</em></p>"),workshopMessage=new Handlebars.SafeString("<p><em>Workshops are not recorded.</em></p>");return this.event_dt_gmt?new Date<=new Date(this.event_dt_gmt)?"workshop"==format?workshopMessage:noVideoYet:"workshop"==format?workshopMessage:videoSoon:"workshop"==format?workshopMessage:noVideoYet}),Handlebars.registerHelper("speakers_header",function(){if(void 0!==this.speakers&&this.speakers.length>0){var speakers_string="";return speakers_string=1==this.speakers.length?conf_sch.speakers_single:conf_sch.speakers_plural,new Handlebars.SafeString('<h2 id="conf-sch-single-speakers-title">'+speakers_string+"</h2>")}return null}),Handlebars.registerHelper("speaker_meta",function(){var speaker_pos_string="";if(void 0!==this.company_position&&this.company_position&&(speaker_pos_string+='<span class="speaker-position">'+this.company_position+"</span>"),void 0!==this.company&&this.company){var company=this.company;void 0!==this.company_website&&this.company_website&&(company='<a href="'+this.company_website+'">'+company+"</a>"),speaker_pos_string&&(speaker_pos_string+=", "),speaker_pos_string+='<span class="speaker-company">'+company+"</span>"}return new Handlebars.SafeString('<div class="speaker-meta">'+speaker_pos_string+"</div>")})}(jQuery);